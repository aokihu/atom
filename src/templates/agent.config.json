{
  "agent": {
    "name": "MyAgent",
    "model": "deepseek/deepseek-chat",
    "params": {
      "temperature": 0.2,
      "maxOutputTokens": 4096
    },
    "execution": {
      "maxModelStepsPerRun": 10,
      "autoContinueOnStepLimit": true,
      "maxToolCallsPerTask": 40,
      "maxContinuationRuns": 5,
      "maxModelStepsPerTask": 80,
      "continueWithoutAdvancingContextRound": true,
      "inputPolicy": {
        "enabled": true,
        "maxInputTokens": 12000,
        "summarizeTargetTokens": 2200,
        "spoolOriginalInput": true,
        "spoolDirectory": ".agent/inbox"
      },
      "contextBudget": {
        "enabled": true,
        "contextWindowTokens": 131072,
        "reserveOutputTokensCap": 2048,
        "safetyMarginRatio": 0.12,
        "safetyMarginMinTokens": 6000,
        "outputTokenDownshifts": [2048, 1024, 512],
        "secondaryCompressTargetTokens": 1200,
        "memoryTrimStep": 3,
        "minMemoryItems": {
          "core": 2,
          "working": 2,
          "ephemeral": 0,
          "longterm": 2
        }
      },
      "overflowPolicy": {
        "clearPendingOnContextOverflow": false,
        "observationWindowMinutes": 15,
        "observationMaxSamples": 128
      },
      "intentGuard": {
        "enabled": true,
        "detector": "model",
        "softBlockAfter": 2,
        "intents": {
          "browser_access": {
            "enabled": true,
            "allowedFamilies": ["browser"],
            "softAllowedFamilies": ["network"],
            "softBlockAfter": 2,
            "minRequiredAttemptsBeforeSoftFallback": 3,
            "softFallbackOnlyOnRequiredFailure": true,
            "noFallback": true,
            "failTaskIfUnmet": true,
            "requiredSuccessFamilies": ["browser"]
          }
        }
      }
    }
  },
  "providers": [
    {
      "provider_id": "deepseek",
      "model": "deepseek-chat",
      "api_key_env": "DEEPSEEK_API_KEY",
      "max_context_tokens": 131072,
      "max_output_tokens": 8192,
      "enabled": true
    },
    {
      "provider_id": "openrouter",
      "model": "openai/gpt-4o-mini",
      "api_key_env": "OPENROUTER_API_KEY",
      "enabled": false
    },
    {
      "provider_id": "openai",
      "model": "gpt-4o-mini",
      "api_key_env": "OPENAI_API_KEY",
      "enabled": false
    },
    {
      "provider_id": "siliconflow",
      "model": "deepseek-ai/DeepSeek-V3",
      "api_key_env": "SILICONFLOW_API_KEY",
      "enabled": false
    },
    {
      "provider_id": "dashscope",
      "model": "qwen-plus",
      "api_key_env": "DASHSCOPE_API_KEY",
      "enabled": false
    },
    {
      "provider_id": "ollama",
      "model": "qwen2.5:7b",
      "api_key_env": "OLLAMA_API_KEY",
      "enabled": false
    }
  ],
  "permissions": {
    "read": {
      "allow": ["^{workspace}/.*"],
      "deny": []
    },
    "ls": {
      "allow": ["^{workspace}/.*"],
      "deny": []
    },
    "tree": {
      "allow": ["^{workspace}/.*"],
      "deny": []
    },
    "ripgrep": {
      "allow": ["^{workspace}/.*"],
      "deny": []
    },
    "write": {
      "allow": ["^{workspace}/.*"],
      "deny": []
    },
    "todo": {
      "allow": ["^{workspace}/.*"],
      "deny": []
    },
    "cp": {
      "allow": ["^{workspace}/.*"],
      "deny": []
    },
    "mv": {
      "allow": ["^{workspace}/.*"],
      "deny": []
    },
    "git": {
      "allow": ["^{workspace}/.*"],
      "deny": []
    },
    "bash": {
      "allow": ["^{workspace}/.*"],
      "deny": []
    },
    "background": {
      "allow": ["^{workspace}/.*"],
      "deny": []
    },
    "webfetch": {
      "allow": ["^https://(docs\\.|developer\\.)?example\\.com/.*"],
      "deny": ["^https?://(localhost|127\\.0\\.0\\.1)(:.*)?/.*"]
    }
  },
  "memory": {
    "persistent": {
      "enabled": true,
      "autoRecall": true,
      "autoCapture": true,
      "maxRecallItems": 6,
      "maxRecallLongtermItems": 6,
      "minCaptureConfidence": 0.7,
      "searchMode": "auto",
      "tagging": {
        "reuseProbabilityThreshold": 0.15,
        "placeholderSummaryMaxLen": 120,
        "reactivatePolicy": {
          "enabled": true,
          "hitCountThreshold": 2,
          "windowHours": 24
        },
        "scheduler": {
          "enabled": true,
          "adaptive": true,
          "baseIntervalMinutes": 15,
          "minIntervalMinutes": 5,
          "maxIntervalMinutes": 180,
          "jitterRatio": 0.1
        }
      }
    }
  },
  "tui": {
    "theme": "nord"
  }
}
